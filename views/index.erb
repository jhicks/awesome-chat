<!doctype html>
<html>
  <head>
    <title>Awesome Chat</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/javascript" src="/faye/client.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
    <script type="text/jsx" src="components.jsx"></script>
    <script type="text/jsx">
      var username = "<%= username %>";
      var users = <%= users.to_json %>;
      var bus = new Faye.Client(window.location.origin + '/faye');
      var ChatController = window.__APP__.components.ChatController;
      React.render(
        <ChatController destinations={['lobby'].concat(users)} bus={bus} me={username}/>,
        document.getElementById('app')
      );
    </script>
  </body>
</html>
